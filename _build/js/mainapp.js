!function(){function e(e,o,t,n){o.html5Mode(!1),e.when("/",{templateUrl:"views/login.html",controller:"LoginController",controllerAs:"login"}).when("/register",{templateUrl:"views/register.html",controller:"RegisterController",controllerAs:"register"}).otherwise({redirectTo:"/"}),t.interceptors.push("authInterceptor")}function o(e,o,t,n){return{request:function(e){return e.headers=e.headers||{},e},responseError:function(e){return 404===e.status?(n.path("/"),o.reject(e)):o.reject(e)}}}function t(e,o){!function(e,o,t){var n,r=e.getElementsByTagName(o)[0];e.getElementById(t)||(n=e.createElement(o),n.id=t,n.src="//connect.facebook.net/en_US/sdk.js",r.parentNode.insertBefore(n,r))}(document,"script","facebook-jssdk")}angular.module("ConnectifyWeb",["ngRoute"]).config(e),e.$inject=["$routeProvider","$locationProvider","$httpProvider","$compileProvider"],angular.module("ConnectifyWeb").factory("authInterceptor",o),o.$inject=["$rootScope","$q","LocalStorage","$location"],angular.module("ConnectifyWeb").run(t),t.$inject=["$rootScope","$location"]}(),function(){angular.module("ConnectifyWeb").constant("CONSTANTS",{API_URL:"http://192.168.0.22:3000/connectifyapi/"})}(),function(){function e(e,o,t){var n=this;return n.getUserInfo=function(){var e=t.defer();return FB.api("/me",function(o){!o||o.error?e.reject("Error occured"):e.resolve(o)}),e.promise},n.watchLoginChange=function(){FB.Event.subscribe("auth.authResponseChange",function(e){"connected"===e.status?console.log("User is connected."):o.url("/login")})},n.logout=function(){FB.logout(function(o){e.$apply(function(){e.user={}})})},n}angular.module("ConnectifyWeb").factory("FacebookService",e),e.$inject=["$rootScope","$location","$q"]}(),function(){function e(e,o){var t=this,n=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var o=16*Math.random()|0,t="x"==e?o:3&o|8;return t.toString(16)})},r=null,i=0,c=null;e.exists()?(r=e.get("visitor_id"),i=e.get("visit_count"),c=e.get("user_rating"),r?(e.update("visit_count",++i),navigator.geolocation.getCurrentPosition(function(o){e.update("latitude",o.coords.latitude),e.update("longitude",o.coords.longitude)})):(e.set("visitor_id",n()),e.set("visit_count",1),navigator.geolocation.getCurrentPosition(function(o){e.set("latitude",o.coords.latitude),e.set("longitude",o.coords.longitude)}))):(r=Cookies.get("visitor_id"),i=Cookies.get("visit_count"),c=Cookies.get("user_rating"),r||Cookies.set("visitor_id",n(),{expires:365}),Cookies.set("visit_count",++i,{expires:365}),navigator.geolocation.getCurrentPosition(function(e){Cookies.set("latitude",e.coords.latitude,{expires:365}),Cookies.set("longitude",e.coords.longitude,{expires:365})})),o.query("GET","hello",{},{}).then(function(e){t.ovocie=e.data,console.log("Hello response: ",t.ovocie)})}function o(e,o,t){o.user={},t.fbAsyncInit=function(){FB.init({appId:"1628447944135801",status:!0,cookie:!0,xfbml:!0,version:"v2.6"}),e.watchLoginChange(),console.log(e.getUserInfo())}}function t(e,o){}angular.module("ConnectifyWeb").controller("MainController",e),e.$inject=["LocalStorage","QueryService"],angular.module("ConnectifyWeb").controller("LoginController",o),o.$inject=["FacebookService","$rootScope","$window"],angular.module("ConnectifyWeb").controller("RegisterController",t),t.$inject=["$rootScope","$window"]}();